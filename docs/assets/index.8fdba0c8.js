var Ke=Object.defineProperty;var Je=(n,e,t)=>e in n?Ke(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var b=(n,e,t)=>(Je(n,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function F(){}function Ue(n){return n()}function Oe(){return Object.create(null)}function G(n){n.forEach(Ue)}function We(n){return typeof n=="function"}function ne(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function Ze(n){return Object.keys(n).length===0}function Qe(n,...e){if(n==null)return F;const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function ee(n,e,t){n.$$.on_destroy.push(Qe(e,t))}function Ie(n,e,t){return n.set(t),e}function u(n,e){n.appendChild(e)}function w(n,e,t){n.insertBefore(e,t||null)}function v(n){n.parentNode.removeChild(n)}function Xe(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function f(n){return document.createElement(n)}function et(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function P(n){return document.createTextNode(n)}function D(){return P(" ")}function tt(){return P("")}function R(n,e,t,l){return n.addEventListener(e,t,l),()=>n.removeEventListener(e,t,l)}function oe(n){return function(e){return e.preventDefault(),n.call(this,e)}}function nt(n){return function(e){return e.stopPropagation(),n.call(this,e)}}function $(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function lt(n){return Array.from(n.childNodes)}function Z(n,e){e=""+e,n.wholeText!==e&&(n.data=e)}function H(n,e){n.value=e==null?"":e}class st{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,l=null){this.e||(this.is_svg?this.e=et(t.nodeName):this.e=f(t.nodeName),this.t=t,this.c(e)),this.i(l)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)w(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(v)}}let ue;function ie(n){ue=n}function Ee(){if(!ue)throw new Error("Function called outside component initialization");return ue}function rt(n){Ee().$$.before_update.push(n)}function Se(n){Ee().$$.on_mount.push(n)}function it(n){Ee().$$.after_update.push(n)}const re=[],Pe=[],_e=[],Ne=[],ot=Promise.resolve();let ke=!1;function ut(){ke||(ke=!0,ot.then(ze))}function ye(n){_e.push(n)}const $e=new Set;let de=0;function ze(){const n=ue;do{for(;de<re.length;){const e=re[de];de++,ie(e),ct(e.$$)}for(ie(null),re.length=0,de=0;Pe.length;)Pe.pop()();for(let e=0;e<_e.length;e+=1){const t=_e[e];$e.has(t)||($e.add(t),t())}_e.length=0}while(re.length);for(;Ne.length;)Ne.pop()();ke=!1,$e.clear(),ie(n)}function ct(n){if(n.fragment!==null){n.update(),G(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(ye)}}const pe=new Set;let W;function Ae(){W={r:0,c:[],p:W}}function Ce(){W.r||G(W.c),W=W.p}function U(n,e){n&&n.i&&(pe.delete(n),n.i(e))}function B(n,e,t,l){if(n&&n.o){if(pe.has(n))return;pe.add(n),W.c.push(()=>{pe.delete(n),l&&(t&&n.d(1),l())}),n.o(e)}else l&&l()}function ce(n){n&&n.c()}function le(n,e,t,l){const{fragment:s,on_mount:r,on_destroy:i,after_update:o}=n.$$;s&&s.m(e,t),l||ye(()=>{const c=r.map(Ue).filter(We);i?i.push(...c):G(c),n.$$.on_mount=[]}),o.forEach(ye)}function se(n,e){const t=n.$$;t.fragment!==null&&(G(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function at(n,e){n.$$.dirty[0]===-1&&(re.push(n),ut(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function ae(n,e,t,l,s,r,i,o=[-1]){const c=ue;ie(n);const a=n.$$={fragment:null,ctx:null,props:r,update:F,not_equal:s,bound:Oe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Oe(),dirty:o,skip_bound:!1,root:e.target||c.$$.root};i&&i(a.root);let k=!1;if(a.ctx=t?t(n,e.props||{},(_,p,...h)=>{const E=h.length?h[0]:p;return a.ctx&&s(a.ctx[_],a.ctx[_]=E)&&(!a.skip_bound&&a.bound[_]&&a.bound[_](E),k&&at(n,_)),p}):[],a.update(),k=!0,G(a.before_update),a.fragment=l?l(a.ctx):!1,e.target){if(e.hydrate){const _=lt(e.target);a.fragment&&a.fragment.l(_),_.forEach(v)}else a.fragment&&a.fragment.c();e.intro&&U(n.$$.fragment),le(n,e.target,e.anchor,e.customElement),ze()}ie(c)}class fe{$destroy(){se(this,1),this.$destroy=F}$on(e,t){const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(t),()=>{const s=l.indexOf(t);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!Ze(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const X=[];function be(n,e=F){let t;const l=new Set;function s(o){if(ne(n,o)&&(n=o,t)){const c=!X.length;for(const a of l)a[1](),X.push(a,n);if(c){for(let a=0;a<X.length;a+=2)X[a][0](X[a+1]);X.length=0}}}function r(o){s(o(n))}function i(o,c=F){const a=[o,c];return l.add(a),l.size===1&&(t=e(s)||F),o(n),()=>{l.delete(a),l.size===0&&(t(),t=null)}}return{set:s,update:r,subscribe:i}}const K=be(""),te=be(""),Be=be({});function he(n,e,t){Be.set(e),K.set(n),t&&te.set(t)}function ft(n,e){te.set(e),K.set(n)}let J=n=>n!=null?n.replace('"','\\"').replace("'","\\'"):null;class dt extends Error{}class Ge extends Error{}class _t{constructor(){b(this,"url");b(this,"username");b(this,"connected",!1);b(this,"offline",!1);b(this,"authorization");b(this,"get",e=>this.request(e,null,"GET"));b(this,"put",(e,t)=>this.request(e,t,"PUT"));b(this,"post",(e,t)=>this.request(e,t,"POST"));b(this,"delete",e=>this.request(e,null,"DELETE"));b(this,"discover",e=>this.post("/v1/discover",`{"url":"${e}"}`));b(this,"feeds",()=>this.get("/v1/feeds"));b(this,"get_feed",e=>this.get(`/v1/feeds/${e}`));b(this,"get_feed_icon",e=>this.get(`/v1/feeds/${e}/icon`));b(this,"create_feed",(e,t)=>{let l=`{"feed_url": "${e}"`;return t!==0&&(l+=', "category_id": ',l+=t),l+="}",this.post("/v1/feeds",l)});b(this,"update_feed",(e,t,l)=>{if(t=J(t),t==null&&l==null)return new Promise((r,i)=>i("No title or category specified"));let s="{";return t!=null&&(s+=`"title": "${J(t)}"`),l!=null&&(t!=null&&(s+=","),s+=`"category": {"id": ${l}}`),s+="}",this.put(`/v1/feeds/${e}`,s)});b(this,"refresh_feed",e=>this.put(`/v1/feeds/${e}/refresh`));b(this,"remove_feed",e=>this.delete(`/v1/feeds/${e}`));b(this,"get_feed_entry",(e,t)=>this.get(`/v1/feeds/${e}/entries/${t}`));b(this,"get_entry",e=>this.get(`/v1/entries/${e}`));b(this,"get_feed_entries",(e,t)=>{let l=[];t!=null&&(t.status!=null&&l.push(`status=${t.status}`),t.offset!=null&&l.push(`offset=${t.offset}`),t.limit!=null&&l.push(`limit=${t.limit}`),t.direction!=null&&l.push(`direction=${t.direction}`),t.order!=null&&l.push(`order=${t.order}`));let s=`/v1/feeds/${e}/entries`;return l.length>0&&(s+="?",s+=l.join("&")),this.get(s)});b(this,"get_entries",e=>{let t=[];e!=null&&(e.status!=null&&t.push(`status=${e.status}`),e.offset!=null&&t.push(`offset=${e.offset}`),e.limit!=null&&t.push(`limit=${e.limit}`),e.direction!=null&&t.push(`direction=${e.direction}`),e.order!=null&&t.push(`order=${e.order}`));let l="/v1/entries";return t.length>0&&(l+="?",l+=t.join("&")),this.get(l)});b(this,"update_entries",(e,t)=>this.put("/v1/entries",`{"entry_ids": [${e.join(",")}], "status": "${J(t)}"}`));b(this,"toggle_bookmark",e=>this.put(`/v1/entries/${e}/bookmark`));b(this,"categories",()=>this.get("/v1/categories"));b(this,"create_category",e=>this.post("/v1/categories",`{"title": "${J(e)}"}`));b(this,"update_category",(e,t)=>this.put(`/v1/categories/${e}`,`{"title": "${J(t)}"}`));b(this,"delete_category",e=>this.delete(`/v1/categories/${e}`));b(this,"ompl_export",()=>this.get("/v1/export"));b(this,"create_user",(e,t,l)=>this.post("/v1/users",`{"username":"${J(e)}", "password:": "${J(t)}", "is_admin": ${l}}`));b(this,"update_user",(e,t)=>this.put(`/v1/users/${e}`,t));b(this,"users",()=>this.get("/v1/users"));b(this,"get_user",e=>this.get(`/v1/users/${e}`));b(this,"get_me",()=>this.get(`/v1/users/${this.username}`));b(this,"delete_user",e=>this.delete(`/v1/users/${e}`))}async connect(e,t,l){return this.connected?!0:(this.url=e,this.username=t,this.authorization=`Basic ${btoa(t+":"+l)}`,this.connected=await this.get_me().then(s=>s!=null),this.connected)}is_connected(){return this.connected}is_offline(){return this.offline}request(e,t=null,l="GET"){let s={method:l,headers:{Authorization:this.authorization}};return t!=null&&(typeof t=="object"&&(t=JSON.stringify(t)),s.body=t),fetch(new Request(this.url+e,s)).catch(r=>{throw this.offline=!0,new Ge("you are offline")}).then(r=>{if(this.offline=!1,!r.ok)throw r.status==401?new dt("invalid credentials"):new Error(`${r.status}: ${r.statusText}`);return r.json()})}}var Y;(function(n){n.READ="read",n.UNREAD="unread",n.REMOVED="removed"})(Y||(Y={}));var Te;(function(n){n.ID="id",n.STATUS="status",n.PUBLISHED_AT="published_at",n.CATEGORY_TITLE="category_title",n.CATEGORY_ID="category_id"})(Te||(Te={}));var Re;(function(n){n.ASCENDING="asc",n.DESCENDING="desc"})(Re||(Re={}));const He="ONLINE",pt="OFFLINE",ve="NOT CONNECTED";let me=be(ve),ge=new _t;function je(){if(!ge.is_connected()){te.set("Article"),K.set("Connect");return}return ge}async function ht(n){var l,s;let e=[],t=[];n.forEach(r=>{r.status==Y.READ&&e.push(r.id),r.status==Y.REMOVED&&t.push(r.id)}),e.length>0&&await((l=je())==null?void 0:l.update_entries(e,Y.READ)),t.length>0&&await((s=je())==null?void 0:s.update_entries(t,Y.REMOVED))}function qe(n){let e,t,l,s,r;return{c(){e=f("br"),t=f("em"),l=P("Login failed with "),s=P(n[4]),r=f("br"),$(t,"class","error")},m(i,o){w(i,e,o),w(i,t,o),u(t,l),u(t,s),w(i,r,o)},p(i,o){o&16&&Z(s,i[4])},d(i){i&&v(e),i&&v(t),i&&v(r)}}}function mt(n){let e,t,l,s,r,i,o,c,a,k,_,p,h,E,A,S,T,O,M,j,x,z,m=n[4]&&qe(n);return{c(){e=f("main"),t=f("form"),l=f("label"),l.textContent="Server",s=f("input"),r=f("br"),i=D(),o=f("label"),o.textContent="Username",c=f("input"),a=f("br"),k=D(),_=f("label"),_.textContent="Password",p=f("input"),h=f("br"),E=D(),m&&m.c(),A=D(),S=f("input"),T=D(),O=f("input"),M=P(`\xA0Zapamatovat heslo
        `),j=f("br"),$(l,"for","url"),$(s,"type","text"),$(s,"name","url"),$(o,"for","username"),$(c,"type","text"),$(c,"name","username"),$(_,"for","password"),$(p,"type","password"),$(p,"name","password"),$(S,"type","submit"),S.value="Connect",$(O,"type","checkbox"),$(O,"name","remember"),$(t,"method","POST")},m(g,q){w(g,e,q),u(e,t),u(t,l),u(t,s),H(s,n[0]),u(t,r),u(t,i),u(t,o),u(t,c),H(c,n[1]),u(t,a),u(t,k),u(t,_),u(t,p),H(p,n[2]),u(t,h),u(t,E),m&&m.m(t,null),u(t,A),u(t,S),u(t,T),u(t,O),H(O,n[3]),u(t,M),u(t,j),x||(z=[R(s,"input",n[6]),R(c,"input",n[7]),R(p,"input",n[8]),R(S,"click",nt(oe(n[5]))),R(O,"change",n[9]),R(t,"submit",oe(n[5]))],x=!0)},p(g,[q]){q&1&&s.value!==g[0]&&H(s,g[0]),q&2&&c.value!==g[1]&&H(c,g[1]),q&4&&p.value!==g[2]&&H(p,g[2]),g[4]?m?m.p(g,q):(m=qe(g),m.c(),m.m(t,A)):m&&(m.d(1),m=null),q&8&&H(O,g[3])},i:F,o:F,d(g){g&&v(e),m&&m.d(),x=!1,G(z)}}}function gt(n,e,t){let l;ee(n,te,E=>t(10,l=E));let s=localStorage.getItem("login_url")||"https://",r=localStorage.getItem("login_username"),i="",o=localStorage.getItem("login_remember")=="yes",c=null;function a(E){return s.startsWith("https://")||t(0,s="https://"+s),i==""&&t(2,i=localStorage.getItem("login_password")),ge.connect(s,r,i).then(()=>{console.log("Successfuly logged in"),localStorage.setItem("login_last",new Date().toISOString()),localStorage.setItem("login_url",s),localStorage.setItem("login_username",r),o?(localStorage.setItem("login_remember","yes"),localStorage.setItem("login_password",i)):localStorage.setItem("login_remember","no"),me.set(He),K.set(l||"Articles")}).catch(A=>{A instanceof Ge?(me.set(pt),K.set(l||"Articles")):me.set(ve),t(4,c=A)})}o&&Se(a);function k(){s=this.value,t(0,s)}function _(){r=this.value,t(1,r)}function p(){i=this.value,t(2,i)}function h(){o=this.value,t(3,o)}return[s,r,i,o,c,a,k,_,p,h]}class bt extends fe{constructor(e){super(),ae(this,e,gt,mt,ne,{})}}class vt{constructor(e){this.dbPromise=new Promise((t,l)=>{const s=indexedDB.open(e,1);s.onerror=r=>{},s.onupgradeneeded=r=>{const i=r.target.result;i.objectStoreNames.contains("articles")||i.createObjectStore("articles",{keyPath:"id"}).createIndex("status","status",{unique:!1})},s.onsuccess=function(r){t(r.target.result),console.log(`Cache ${e} ready`)}}),this.filter="unread",this.ordering="id"}async connect(){return this.dbPromise}async query(){return this.connect().then(e=>{const t=e.transaction(["articles"]).objectStore("articles");let l={total:0,entries:[],updated:new Date(localStorage.getItem("cache_updated"))};return new Promise((s,r)=>{t.index("status").openCursor(IDBKeyRange.only(this.filter)).onsuccess=i=>{const o=i.target.result;o?(l.entries.push(o.value),l.total+=1,o.continue()):s(l)}})})}setFilter(e){this.filter=e}setOrdering(){}async mark_read(e){return this.dbPromise.then(t=>{const l=t.transaction(["articles"]).objectStore("articles"),s=l.get(e);return new Promise((r,i)=>{s.onsuccess=()=>{let o=s.result;o.status=Y.READ;let c=l.update(o);c.onsuccess=()=>{r()}}})})}async get_entry(e){return this.connect().then(t=>{const s=t.transaction(["articles"]).objectStore("articles").get(e);return new Promise((r,i)=>{s.onsuccess=()=>{r(s.result)}})})}async mark(e,t){if(t!="READ"&&t!="REMOVED")throw new Error("Must be READ or REMOVED");return console.log(`Atempting to mark article ${e} as ${t}`),await this.get_entry(e),this.dbPromise.then(l=>{const s=l.transaction(["articles"],"readwrite").objectStore("articles"),r=s.get(e);return new Promise((i,o)=>{r.onsuccess=()=>{let c=r.result;c.status=Y[t];let a=s.put(c);a.onsuccess=()=>{i()}}})})}async entries(){return this.dbPromise.then(e=>{const l=e.transaction(["articles"]).objectStore("articles").getAll();return new Promise((s,r)=>{l.onsuccess=()=>{s(l.result)}})})}async get_next(e){const t=await this.query();let l=!1;for(const s of t.entries){if(l)return s;l=s.id==e.id}return t.entries.at(-1)}async clear(){const t=(await this.dbPromise).transaction(["articles"],"readwrite").objectStore("articles");return new Promise((l,s)=>{t.clear().onsuccess=l,console.log("Cache cleared")})}async update(e){const l=(await this.dbPromise).transaction(["articles"],"readwrite").objectStore("articles");return console.log("Cache updated"),e.map(s=>new Promise((r,i)=>{l.add(s).onsuccess=()=>{localStorage.setItem("cache_updated",new Date().toISOString()),r()}}))}get_age(){return localStorage.getItem("cache_updated")==null?-1:Date.now()-new Date(localStorage.getItem("cache_updated")).getTime()}}const L=new vt("maxiflux");function $t(n){let e,t,l,s,r,i,o;return{c(){e=f("main"),t=f("div"),l=f("button"),l.textContent="\u25B2",s=D(),r=f("button"),r.textContent="\u25BC",$(l,"class","svelte-118eg67"),$(r,"class","svelte-118eg67"),$(t,"class","svelte-118eg67")},m(c,a){w(c,e,a),u(e,t),u(t,l),u(t,s),u(t,r),i||(o=[R(l,"click",oe(n[0])),R(r,"click",oe(n[1]))],i=!0)},p:F,i:F,o:F,d(c){c&&v(e),i=!1,G(o)}}}function Le(n="up"){let e=Math.round(window.window.visualViewport.height*.9);n=="up"?window.scroll(0,window.scrollY-e):window.scroll(0,window.scrollY+e)}function wt(n){return[()=>Le("up"),()=>Le("down")]}class Ye extends fe{constructor(e){super(),ae(this,e,wt,$t,ne,{})}}function Me(n,e,t){const l=n.slice();return l[11]=e[t],l}function we(n){const e=n.slice(),t=At(L.get_age());return e[10]=t,e}function xe(n){let e,t,l,s,r,i,o=n[0].total+"",c,a,k,_,p,h,E,A,S,T,O,M,j,x;e=new Ye({});function z(d,I){return d[1]==ve?yt:kt}let m=z(n),g=m(n),q=n[0].entries,N=[];for(let d=0;d<q.length;d+=1)N[d]=Ve(Me(n,q,d));return{c(){ce(e.$$.fragment),t=D(),l=f("nav"),g.c(),s=D(),r=f("h1"),i=P("Articles ("),c=P(o),a=P(")"),k=D(),_=f("nav"),p=f("span"),p.innerHTML="<button>Read</button>/<button>Unread</button>",h=D(),E=f("select"),A=f("option"),A.textContent="-- sort by --",S=f("option"),S.textContent="Latest",T=f("option"),T.textContent="Oldest",O=f("option"),O.textContent="Random",M=D(),j=f("ul");for(let d=0;d<N.length;d+=1)N[d].c();$(l,"id","download"),$(l,"class","svelte-1251s8u"),A.__value="",A.value=A.__value,S.__value="latest",S.value=S.__value,T.__value="oldest",T.value=T.__value,O.__value="random",O.value=O.__value,$(E,"name","sort"),$(_,"class","svelte-1251s8u"),$(j,"class","svelte-1251s8u")},m(d,I){le(e,d,I),w(d,t,I),w(d,l,I),g.m(l,null),w(d,s,I),w(d,r,I),u(r,i),u(r,c),u(r,a),w(d,k,I),w(d,_,I),u(_,p),u(_,h),u(_,E),u(E,A),u(E,S),u(E,T),u(E,O),w(d,M,I),w(d,j,I);for(let C=0;C<N.length;C+=1)N[C].m(j,null);x=!0},p(d,I){if(m===(m=z(d))&&g?g.p(d,I):(g.d(1),g=m(d),g&&(g.c(),g.m(l,null))),(!x||I&1)&&o!==(o=d[0].total+"")&&Z(c,o),I&1){q=d[0].entries;let C;for(C=0;C<q.length;C+=1){const Q=Me(d,q,C);N[C]?N[C].p(Q,I):(N[C]=Ve(Q),N[C].c(),N[C].m(j,null))}for(;C<N.length;C+=1)N[C].d(1);N.length=q.length}},i(d){x||(U(e.$$.fragment,d),x=!0)},o(d){B(e.$$.fragment,d),x=!1},d(d){se(e,d),d&&v(t),d&&v(l),g.d(),d&&v(s),d&&v(r),d&&v(k),d&&v(_),d&&v(M),d&&v(j),Xe(N,d)}}}function kt(n){let e,t,l,s,r,i,o,c,a,k,_=n[10]>0&&Et(n);return{c(){e=f("select"),t=f("option"),t.textContent="limit",l=f("option"),l.textContent="50",s=f("option"),s.textContent="100",r=f("option"),r.textContent="all",i=D(),o=f("button"),o.textContent="\u{1F504}",_&&_.c(),c=tt(),t.__value="all",t.value=t.__value,l.__value="50",l.value=l.__value,s.__value="100",s.value=s.__value,r.__value="all",r.value=r.__value,$(e,"name","limit")},m(p,h){w(p,e,h),u(e,t),u(e,l),u(e,s),u(e,r),w(p,i,h),w(p,o,h),_&&_.m(p,h),w(p,c,h),a||(k=R(o,"click",n[4]),a=!0)},p(p,h){p[10]>0&&_.p(p,h)},d(p){p&&v(e),p&&v(i),p&&v(o),_&&_.d(p),p&&v(c),a=!1,k()}}}function yt(n){let e,t,l;return{c(){e=f("button"),e.textContent="Connect"},m(s,r){w(s,e,r),t||(l=R(e,"click",n[3]),t=!0)},p:F,d(s){s&&v(e),t=!1,l()}}}function Et(n){let e,t,l=n[10]+"",s,r;return{c(){e=f("em"),t=P("(last sync "),s=P(l),r=P(" days ago)")},m(i,o){w(i,e,o),u(e,t),u(e,s),u(e,r)},p:F,d(i){i&&v(e)}}}function Ve(n){let e,t,l,s,r,i=n[11].title+"",o,c,a,k,_=n[11].feed.title+"",p,h,E,A=new Date(n[11].changed_at).toLocaleDateString()+"",S,T,O,M,j;function x(...m){return n[5](n[11],...m)}function z(...m){return n[6](n[11],...m)}return{c(){e=f("li"),t=f("button"),t.textContent="x",l=D(),s=f("a"),r=f("h2"),o=P(i),c=D(),a=f("em"),k=P("From "),p=P(_),h=P(" on "),E=f("date"),S=P(A),O=D(),$(t,"class","close svelte-1251s8u"),$(r,"class","svelte-1251s8u"),$(a,"class","svelte-1251s8u"),$(s,"href",T="article/"+n[11].id),$(s,"class","svelte-1251s8u"),$(e,"class","svelte-1251s8u")},m(m,g){w(m,e,g),u(e,t),u(e,l),u(e,s),u(s,r),u(r,o),u(s,c),u(s,a),u(a,k),u(a,p),u(a,h),u(a,E),u(E,S),u(e,O),M||(j=[R(t,"click",x),R(s,"click",oe(z))],M=!0)},p(m,g){n=m,g&1&&i!==(i=n[11].title+"")&&Z(o,i),g&1&&_!==(_=n[11].feed.title+"")&&Z(p,_),g&1&&A!==(A=new Date(n[11].changed_at).toLocaleDateString()+"")&&Z(S,A),g&1&&T!==(T="article/"+n[11].id)&&$(s,"href",T)},d(m){m&&v(e),M=!1,G(j)}}}function St(n){let e,t,l=n[0]&&xe(we(n));return{c(){e=f("main"),l&&l.c()},m(s,r){w(s,e,r),l&&l.m(e,null),t=!0},p(s,[r]){s[0]?l?(l.p(we(s),r),r&1&&U(l,1)):(l=xe(we(s)),l.c(),U(l,1),l.m(e,null)):l&&(Ae(),B(l,1,1,()=>{l=null}),Ce())},i(s){t||(U(l),t=!0)},o(s){B(l),t=!1},d(s){s&&v(e),l&&l.d()}}}function At(n){return Math.round(n/1e3/3600/24)}function Ct(n,e,t){let l,s,r;ee(n,me,h=>t(1,l=h)),ee(n,K,h=>t(7,s=h)),ee(n,te,h=>t(8,r=h));let i=null;async function o(){if(l==ve){Ie(te,r="Articles",r),Ie(K,s="Connect",s);return}return l!=He&&console.log("Connection failed "+l),await ht(L.entries()),ge.get_entries().then(h=>L.clear().then(()=>L.update(h.entries)))}async function c(){L.get_age()<0&&await o(),t(0,i=await L.query())}return Se(c),[i,l,o,h=>ft("Connect","Articles"),h=>o(),(h,E)=>{L.mark(h.id,"REMOVED"),E.currentTarget.parentElement.remove()},(h,E)=>he("Article",{id:h.id})]}class Dt extends fe{constructor(e){super(),ae(this,e,Ct,St,ne,{})}}function Fe(n){let e,t,l,s,r,i,o,c,a,k,_=n[1].title+"",p,h,E=n[1].status+"",A,S,T,O,M=n[1].content+"",j,x,z,m,g,q,N,d,I,C,Q,De;return e=new Ye({}),{c(){ce(e.$$.fragment),t=D(),l=f("nav"),s=f("button"),s.textContent="\u{1F519} Articles",r=D(),i=f("button"),i.textContent="\u{1F44B} Delete",o=D(),c=f("button"),c.textContent="Next \u{1F8A5}",a=D(),k=f("h1"),p=P(_),h=P(" ("),A=P(E),S=P(")"),T=D(),O=new st(!1),j=D(),x=f("br"),z=D(),m=f("nav"),g=f("button"),g.textContent="\u{1F519} Articles",q=D(),N=f("button"),N.textContent="\u{1F44B} Delete",d=D(),I=f("button"),I.textContent="Next \u{1F8A5}",$(l,"class","svelte-10vigfk"),O.a=j,$(m,"id","nav-bottom"),$(m,"class","svelte-10vigfk")},m(y,V){le(e,y,V),w(y,t,V),w(y,l,V),u(l,s),u(l,r),u(l,i),u(l,o),u(l,c),w(y,a,V),w(y,k,V),u(k,p),u(k,h),u(k,A),u(k,S),w(y,T,V),O.m(M,y,V),w(y,j,V),w(y,x,V),w(y,z,V),w(y,m,V),u(m,g),u(m,q),u(m,N),u(m,d),u(m,I),C=!0,Q||(De=[R(s,"click",n[3]),R(i,"click",n[4]),R(c,"click",n[5]),R(g,"click",n[6]),R(N,"click",n[7]),R(I,"click",n[8])],Q=!0)},p(y,V){(!C||V&2)&&_!==(_=y[1].title+"")&&Z(p,_),(!C||V&2)&&E!==(E=y[1].status+"")&&Z(A,E),(!C||V&2)&&M!==(M=y[1].content+"")&&O.p(M)},i(y){C||(U(e.$$.fragment,y),C=!0)},o(y){B(e.$$.fragment,y),C=!1},d(y){se(e,y),y&&v(t),y&&v(l),y&&v(a),y&&v(k),y&&v(T),y&&O.d(),y&&v(j),y&&v(x),y&&v(z),y&&v(m),Q=!1,G(De)}}}function Ot(n){let e,t,l=n[1]&&Fe(n);return{c(){e=f("main"),l&&l.c()},m(s,r){w(s,e,r),l&&l.m(e,null),t=!0},p(s,[r]){s[1]?l?(l.p(s,r),r&2&&U(l,1)):(l=Fe(s),l.c(),U(l,1),l.m(e,null)):l&&(Ae(),B(l,1,1,()=>{l=null}),Ce())},i(s){t||(U(l),t=!0)},o(s){B(l),t=!1},d(s){s&&v(e),l&&l.d()}}}function It(n,e,t){let{id:l}=e,s=null,r=!0;async function i(){t(1,s=await L.get_entry(l))}function o(S){window.scroll(0,0),t(1,s=S)}Se(i);let c=new IntersectionObserver(()=>{s&&r?r=!1:L.mark(s.id,"READ")},{root:document.querySelector("#scrollArea"),rootMargin:"0px",threshold:1});rt(()=>{r=!0});let a=!1;it(async()=>{let S=document.querySelector("#nav-bottom");S&&!a&&(c.observe(S),a=!0)});const k=()=>he("Articles"),_=()=>{L.mark(l,"REMOVED"),he("Articles")},p=()=>{L.mark(s.id,"READ"),L.get_next(s).then(o)},h=()=>{L.mark(s.id,"READ"),he("Articles")},E=S=>{L.mark(s.id,"REMOVED"),S.currentTarget.remove()},A=()=>{L.mark(s.id,"READ"),L.get_next(s).then(o)};return n.$$set=S=>{"id"in S&&t(0,l=S.id)},[l,s,o,k,_,p,h,E,A]}class Pt extends fe{constructor(e){super(),ae(this,e,It,Ot,ne,{id:0})}}function Nt(n){let e,t;return e=new Dt({}),{c(){ce(e.$$.fragment)},m(l,s){le(e,l,s),t=!0},p:F,i(l){t||(U(e.$$.fragment,l),t=!0)},o(l){B(e.$$.fragment,l),t=!1},d(l){se(e,l)}}}function Tt(n){let e,t;return e=new Pt({props:{id:n[1].id}}),{c(){ce(e.$$.fragment)},m(l,s){le(e,l,s),t=!0},p(l,s){const r={};s&2&&(r.id=l[1].id),e.$set(r)},i(l){t||(U(e.$$.fragment,l),t=!0)},o(l){B(e.$$.fragment,l),t=!1},d(l){se(e,l)}}}function Rt(n){let e,t;return e=new bt({}),{c(){ce(e.$$.fragment)},m(l,s){le(e,l,s),t=!0},p:F,i(l){t||(U(e.$$.fragment,l),t=!0)},o(l){B(e.$$.fragment,l),t=!1},d(l){se(e,l)}}}function jt(n){let e,t,l,s;const r=[Rt,Tt,Nt],i=[];function o(c,a){return c[0]=="Connect"?0:c[0]=="Article"?1:c[0]=="Articles"||c[0]==""?2:-1}return~(t=o(n))&&(l=i[t]=r[t](n)),{c(){e=f("main"),l&&l.c()},m(c,a){w(c,e,a),~t&&i[t].m(e,null),s=!0},p(c,[a]){let k=t;t=o(c),t===k?~t&&i[t].p(c,a):(l&&(Ae(),B(i[k],1,1,()=>{i[k]=null}),Ce()),~t?(l=i[t],l?l.p(c,a):(l=i[t]=r[t](c),l.c()),U(l,1),l.m(e,null)):l=null)},i(c){s||(U(l),s=!0)},o(c){B(l),s=!1},d(c){c&&v(e),~t&&i[t].d()}}}function qt(n,e,t){let l,s;return ee(n,K,r=>t(0,l=r)),ee(n,Be,r=>t(1,s=r)),[l,s]}class Lt extends fe{constructor(e){super(),ae(this,e,qt,jt,ne,{})}}new Lt({target:document.getElementById("app")});
