var Ze=Object.defineProperty;var Qe=(n,e,t)=>e in n?Ze(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var y=(n,e,t)=>(Qe(n,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function M(){}function Ue(n){return n()}function Ee(){return Object.create(null)}function z(n){n.forEach(Ue)}function Xe(n){return typeof n=="function"}function se(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function xe(n){return Object.keys(n).length===0}function et(n,...e){if(n==null)return M;const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Z(n,e,t){n.$$.on_destroy.push(et(e,t))}function Se(n,e,t){return n.set(t),e}function c(n,e){n.appendChild(e)}function w(n,e,t){n.insertBefore(e,t||null)}function b(n){n.parentNode.removeChild(n)}function Ae(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function _(n){return document.createElement(n)}function tt(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function C(n){return document.createTextNode(n)}function N(){return C(" ")}function Ge(){return C("")}function L(n,e,t,l){return n.addEventListener(e,t,l),()=>n.removeEventListener(e,t,l)}function ce(n){return function(e){return e.preventDefault(),n.call(this,e)}}function nt(n){return function(e){return e.stopPropagation(),n.call(this,e)}}function O(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function lt(n){return Array.from(n.childNodes)}function F(n,e){e=""+e,n.wholeText!==e&&(n.data=e)}function U(n,e){n.value=e==null?"":e}function V(n,e,t,l){t===null?n.style.removeProperty(e):n.style.setProperty(e,t,l?"important":"")}class it{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,l=null){this.e||(this.is_svg?this.e=tt(t.nodeName):this.e=_(t.nodeName),this.t=t,this.c(e)),this.i(l)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)w(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(b)}}let le;function te(n){le=n}function Be(){if(!le)throw new Error("Function called outside component initialization");return le}function ke(n){Be().$$.on_mount.push(n)}function st(n){Be().$$.after_update.push(n)}const ee=[],De=[],oe=[],Oe=[],rt=Promise.resolve();let $e=!1;function ot(){$e||($e=!0,rt.then(He))}function we(n){oe.push(n)}const ge=new Set;let re=0;function He(){const n=le;do{for(;re<ee.length;){const e=ee[re];re++,te(e),ut(e.$$)}for(te(null),ee.length=0,re=0;De.length;)De.pop()();for(let e=0;e<oe.length;e+=1){const t=oe[e];ge.has(t)||(ge.add(t),t())}oe.length=0}while(ee.length);for(;Oe.length;)Oe.pop()();$e=!1,ge.clear(),te(n)}function ut(n){if(n.fragment!==null){n.update(),z(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(we)}}const ue=new Set;let K;function ct(){K={r:0,c:[],p:K}}function ft(){K.r||z(K.c),K=K.p}function Q(n,e){n&&n.i&&(ue.delete(n),n.i(e))}function ie(n,e,t,l){if(n&&n.o){if(ue.has(n))return;ue.add(n),K.c.push(()=>{ue.delete(n),l&&(t&&n.d(1),l())}),n.o(e)}else l&&l()}function ye(n){n&&n.c()}function de(n,e,t,l){const{fragment:i,on_mount:s,on_destroy:r,after_update:u}=n.$$;i&&i.m(e,t),l||we(()=>{const a=s.map(Ue).filter(Xe);r?r.push(...a):z(a),n.$$.on_mount=[]}),u.forEach(we)}function _e(n,e){const t=n.$$;t.fragment!==null&&(z(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function at(n,e){n.$$.dirty[0]===-1&&(ee.push(n),ot(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function he(n,e,t,l,i,s,r,u=[-1]){const a=le;te(n);const f=n.$$={fragment:null,ctx:null,props:s,update:M,not_equal:i,bound:Ee(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Ee(),dirty:u,skip_bound:!1,root:e.target||a.$$.root};r&&r(f.root);let A=!1;if(f.ctx=t?t(n,e.props||{},(g,E,...I)=>{const h=I.length?I[0]:E;return f.ctx&&i(f.ctx[g],f.ctx[g]=h)&&(!f.skip_bound&&f.bound[g]&&f.bound[g](h),A&&at(n,g)),E}):[],f.update(),A=!0,z(f.before_update),f.fragment=l?l(f.ctx):!1,e.target){if(e.hydrate){const g=lt(e.target);f.fragment&&f.fragment.l(g),g.forEach(b)}else f.fragment&&f.fragment.c();e.intro&&Q(n.$$.fragment),de(n,e.target,e.anchor,e.customElement),He()}te(a)}class pe{$destroy(){_e(this,1),this.$destroy=M}$on(e,t){const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(t),()=>{const i=l.indexOf(t);i!==-1&&l.splice(i,1)}}$set(e){this.$$set&&!xe(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Y=[];function me(n,e=M){let t;const l=new Set;function i(u){if(se(n,u)&&(n=u,t)){const a=!Y.length;for(const f of l)f[1](),Y.push(f,n);if(a){for(let f=0;f<Y.length;f+=2)Y[f][0](Y[f+1]);Y.length=0}}}function s(u){i(u(n))}function r(u,a=M){const f=[u,a];return l.add(f),l.size===1&&(t=e(i)||M),u(n),()=>{l.delete(f),l.size===0&&(t(),t=null)}}return{set:i,update:s,subscribe:r}}const B=me(""),X=me(""),Ke=me({});function J(n,e,t){Ke.set(e),B.set(n),t&&X.set(t)}function dt(n,e){X.set(e),B.set(n)}let H=n=>n!=null?n.replace('"','\\"').replace("'","\\'"):null;class _t extends Error{}class Ye extends Error{}class ht{constructor(){y(this,"url");y(this,"username");y(this,"connected",!1);y(this,"offline",!1);y(this,"authorization");y(this,"get",e=>this.request(e,null,"GET"));y(this,"put",(e,t)=>this.request(e,t,"PUT"));y(this,"post",(e,t)=>this.request(e,t,"POST"));y(this,"delete",e=>this.request(e,null,"DELETE"));y(this,"discover",e=>this.post("/v1/discover",`{"url":"${e}"}`));y(this,"feeds",()=>this.get("/v1/feeds"));y(this,"get_feed",e=>this.get(`/v1/feeds/${e}`));y(this,"get_feed_icon",e=>this.get(`/v1/feeds/${e}/icon`));y(this,"create_feed",(e,t)=>{let l=`{"feed_url": "${e}"`;return t!==0&&(l+=', "category_id": ',l+=t),l+="}",this.post("/v1/feeds",l)});y(this,"update_feed",(e,t,l)=>{if(t=H(t),t==null&&l==null)return new Promise((s,r)=>r("No title or category specified"));let i="{";return t!=null&&(i+=`"title": "${H(t)}"`),l!=null&&(t!=null&&(i+=","),i+=`"category": {"id": ${l}}`),i+="}",this.put(`/v1/feeds/${e}`,i)});y(this,"refresh_feed",e=>this.put(`/v1/feeds/${e}/refresh`));y(this,"remove_feed",e=>this.delete(`/v1/feeds/${e}`));y(this,"get_feed_entry",(e,t)=>this.get(`/v1/feeds/${e}/entries/${t}`));y(this,"get_entry",e=>this.get(`/v1/entries/${e}`));y(this,"get_feed_entries",(e,t)=>{let l=[];t!=null&&(t.status!=null&&l.push(`status=${t.status}`),t.offset!=null&&l.push(`offset=${t.offset}`),t.limit!=null&&l.push(`limit=${t.limit}`),t.direction!=null&&l.push(`direction=${t.direction}`),t.order!=null&&l.push(`order=${t.order}`));let i=`/v1/feeds/${e}/entries`;return l.length>0&&(i+="?",i+=l.join("&")),this.get(i)});y(this,"get_entries",e=>{let t=[];e!=null&&(e.status!=null&&t.push(`status=${e.status}`),e.offset!=null&&t.push(`offset=${e.offset}`),e.limit!=null&&t.push(`limit=${e.limit}`),e.direction!=null&&t.push(`direction=${e.direction}`),e.order!=null&&t.push(`order=${e.order}`));let l="/v1/entries";return t.length>0&&(l+="?",l+=t.join("&")),this.get(l)});y(this,"update_entries",(e,t)=>this.put("/v1/entries",`{"entry_ids": [${e.join(",")}], "status": "${H(t)}"}`));y(this,"toggle_bookmark",e=>this.put(`/v1/entries/${e}/bookmark`));y(this,"categories",()=>this.get("/v1/categories"));y(this,"create_category",e=>this.post("/v1/categories",`{"title": "${H(e)}"}`));y(this,"update_category",(e,t)=>this.put(`/v1/categories/${e}`,`{"title": "${H(t)}"}`));y(this,"delete_category",e=>this.delete(`/v1/categories/${e}`));y(this,"ompl_export",()=>this.get("/v1/export"));y(this,"create_user",(e,t,l)=>this.post("/v1/users",`{"username":"${H(e)}", "password:": "${H(t)}", "is_admin": ${l}}`));y(this,"update_user",(e,t)=>this.put(`/v1/users/${e}`,t));y(this,"users",()=>this.get("/v1/users"));y(this,"get_user",e=>this.get(`/v1/users/${e}`));y(this,"get_me",()=>this.get(`/v1/users/${this.username}`));y(this,"delete_user",e=>this.delete(`/v1/users/${e}`))}async connect(e,t,l){return this.connected?!0:(this.url=e,this.username=t,this.authorization=`Basic ${btoa(t+":"+l)}`,this.connected=await this.get_me().then(i=>i!=null),this.connected)}is_connected(){return this.connected}is_offline(){return this.offline}request(e,t=null,l="GET"){let i={method:l,headers:{Authorization:this.authorization}};return t!=null&&(typeof t=="object"&&(t=JSON.stringify(t)),i.body=t),fetch(new Request(this.url+e,i)).catch(s=>{throw this.offline=!0,new Ye("you are offline")}).then(s=>{if(this.offline=!1,!s.ok)throw s.status==401?new _t("invalid credentials"):new Error(`${s.status}: ${s.statusText}`);return s.json()})}}var G;(function(n){n.READ="read",n.UNREAD="unread",n.REMOVED="removed"})(G||(G={}));var Ce;(function(n){n.ID="id",n.STATUS="status",n.PUBLISHED_AT="published_at",n.CATEGORY_TITLE="category_title",n.CATEGORY_ID="category_id"})(Ce||(Ce={}));var Ie;(function(n){n.ASCENDING="asc",n.DESCENDING="desc"})(Ie||(Ie={}));const pt="maxiflux",x=new Promise((n,e)=>{const t=indexedDB.open(pt,1);t.onerror=l=>{},t.onupgradeneeded=l=>{const i=l.target.result;i.objectStoreNames.contains("articles")||i.createObjectStore("articles",{keyPath:"id"}).createIndex("status","status",{unique:!1})},t.onsuccess=function(l){n(l.target.result),console.log("Offline database ready")}});async function mt(){return x.then(n=>{const e=n.transaction(["articles"]).objectStore("articles");let t={total:0,entries:[],updated:new Date(localStorage.getItem("cache_updated"))};return new Promise((l,i)=>{e.openCursor().onsuccess=s=>{const r=s.target.result;r?(r.value.status!=G.REMOVED&&(t.entries.push(r.value),t.total+=1),r.continue()):l(t)}})})}async function Je(n){return x.then(e=>{const l=e.transaction(["articles"]).objectStore("articles").get(n);return new Promise((i,s)=>{l.onsuccess=()=>{i(l.result)}})})}async function W(n,e){if(e!="READ"&&e!="REMOVED")throw new Error("Must be READ or REMOVED");return console.log(`Atempting to mark article ${n} as ${e}`),await Je(n),x.then(t=>{const l=t.transaction(["articles"],"readwrite").objectStore("articles"),i=l.get(n);return new Promise((s,r)=>{i.onsuccess=()=>{let u=i.result;u.status=G[e];let a=l.put(u);a.onsuccess=()=>{s()}}})})}async function bt(){return x.then(n=>{const t=n.transaction(["articles"]).objectStore("articles").getAll();return new Promise((l,i)=>{t.onsuccess=()=>{l(t.result)}})})}async function gt(){const e=(await x).transaction(["articles"],"readwrite").objectStore("articles");return new Promise((t,l)=>{e.clear().onsuccess=t,console.log("Cache cleared")})}async function vt(n){const t=(await x).transaction(["articles"],"readwrite").objectStore("articles");return localStorage.setItem("cache_updated",new Date().toISOString()),n.entries.map(l=>new Promise((i,s)=>{t.add(l).onsuccess=()=>{localStorage.setItem("cache_updated",new Date().toISOString()),i()}}))}function We(){return localStorage.getItem("cache_updated")==null?-1:Date.now()-new Date(localStorage.getItem("cache_updated")).getTime()}function $t(n){return Math.round(n/1e3/3600/24)}const fe="ONLINE",wt="OFFLINE",be="NOT CONNECTED";let ne=me(be),ae=new ht;function Ne(){if(!ae.is_connected()){X.set("Article"),B.set("Connect");return}return ae}async function kt(n){var i,s;if(console.log(`Syncing cache to server? ${n==fe}`),n!=fe)return;let e=[],t=[];(await bt()).forEach(r=>{r.status==G.READ&&e.push(r.id),r.status==G.REMOVED&&t.push(r.id)}),e.length>0&&((i=Ne())==null||i.update_entries(e,G.READ)),t.length>0&&((s=Ne())==null||s.update_entries(t,G.REMOVED))}ne.subscribe(kt);function Te(n){let e,t,l,i,s;return{c(){e=_("br"),t=_("em"),l=C("Login failed with "),i=C(n[4]),s=_("br"),O(t,"class","error")},m(r,u){w(r,e,u),w(r,t,u),c(t,l),c(t,i),w(r,s,u)},p(r,u){u&16&&F(i,r[4])},d(r){r&&b(e),r&&b(t),r&&b(s)}}}function yt(n){let e,t,l,i,s,r,u,a,f,A,g,E,I,h,k,R,P,m,j,v,T,D,o=n[4]&&Te(n);return{c(){e=_("main"),t=_("form"),l=_("label"),l.textContent="Server",i=_("input"),s=_("br"),r=N(),u=_("label"),u.textContent="Username",a=_("input"),f=_("br"),A=N(),g=_("label"),g.textContent="Password",E=_("input"),I=_("br"),h=N(),o&&o.c(),k=N(),R=_("input"),P=N(),m=_("input"),j=C(`\xA0Zapamatovat heslo
        `),v=_("br"),O(l,"for","url"),O(i,"type","text"),O(i,"name","url"),O(u,"for","username"),O(a,"type","text"),O(a,"name","username"),O(g,"for","password"),O(E,"type","password"),O(E,"name","password"),O(R,"type","submit"),R.value="Connect",O(m,"type","checkbox"),O(m,"name","remember"),O(t,"method","POST")},m(p,d){w(p,e,d),c(e,t),c(t,l),c(t,i),U(i,n[0]),c(t,s),c(t,r),c(t,u),c(t,a),U(a,n[1]),c(t,f),c(t,A),c(t,g),c(t,E),U(E,n[2]),c(t,I),c(t,h),o&&o.m(t,null),c(t,k),c(t,R),c(t,P),c(t,m),U(m,n[3]),c(t,j),c(t,v),T||(D=[L(i,"input",n[6]),L(a,"input",n[7]),L(E,"input",n[8]),L(R,"click",nt(ce(n[5]))),L(m,"change",n[9]),L(t,"submit",ce(n[5]))],T=!0)},p(p,[d]){d&1&&i.value!==p[0]&&U(i,p[0]),d&2&&a.value!==p[1]&&U(a,p[1]),d&4&&E.value!==p[2]&&U(E,p[2]),p[4]?o?o.p(p,d):(o=Te(p),o.c(),o.m(t,k)):o&&(o.d(1),o=null),d&8&&U(m,p[3])},i:M,o:M,d(p){p&&b(e),o&&o.d(),T=!1,z(D)}}}function Et(n,e,t){let l;Z(n,X,h=>t(10,l=h));let i=localStorage.getItem("login_url")||"https://",s=localStorage.getItem("login_username"),r="",u=localStorage.getItem("login_remember")=="yes",a=null;function f(h){return i.startsWith("https://")||t(0,i="https://"+i),r==""&&t(2,r=localStorage.getItem("login_password")),ae.connect(i,s,r).then(()=>{console.log("Successfuly logged in"),localStorage.setItem("login_last",new Date().toISOString()),localStorage.setItem("login_url",i),localStorage.setItem("login_username",s),u?(localStorage.setItem("login_remember","yes"),localStorage.setItem("login_password",r)):localStorage.setItem("login_remember","no"),ne.set(fe),B.set(l||"Articles")}).catch(k=>{k instanceof Ye?(ne.set(wt),B.set(l||"Articles")):ne.set(be),t(4,a=k)})}u&&ke(f);function A(){i=this.value,t(0,i)}function g(){s=this.value,t(1,s)}function E(){r=this.value,t(2,r)}function I(){u=this.value,t(3,u)}return[i,s,r,u,a,f,A,g,E,I]}class St extends pe{constructor(e){super(),he(this,e,Et,yt,se,{})}}function Re(n,e,t){const l=n.slice();return l[12]=e[t],l}function je(n,e,t){const l=n.slice();return l[12]=e[t],l}function ve(n){const e=n.slice(),t=$t(We());return e[11]=t,e}function Pe(n){let e,t,l,i,s=n[0].total+"",r,u,a,f,A,g,E,I,h,k;function R(o,p){return o[1]==be?Dt:At}let P=R(n),m=P(n),j=n[0].entries.filter(qe),v=[];for(let o=0;o<j.length;o+=1)v[o]=Le(je(n,j,o));let T=n[0].entries.filter(Ve),D=[];for(let o=0;o<T.length;o+=1)D[o]=Me(Re(n,T,o));return{c(){e=_("nav"),m.c(),t=N(),l=_("h1"),l.textContent="Articles",i=C(`
        Found `),r=C(s),u=C(" articles"),a=_("br"),f=N(),A=_("h2"),A.textContent="Unread articles",g=N();for(let o=0;o<v.length;o+=1)v[o].c();E=N(),I=_("h2"),I.textContent="Read articles",h=N();for(let o=0;o<D.length;o+=1)D[o].c();k=Ge(),O(e,"class","absolute svelte-nteh7u")},m(o,p){w(o,e,p),m.m(e,null),w(o,t,p),w(o,l,p),w(o,i,p),w(o,r,p),w(o,u,p),w(o,a,p),w(o,f,p),w(o,A,p),w(o,g,p);for(let d=0;d<v.length;d+=1)v[d].m(o,p);w(o,E,p),w(o,I,p),w(o,h,p);for(let d=0;d<D.length;d+=1)D[d].m(o,p);w(o,k,p)},p(o,p){if(P===(P=R(o))&&m?m.p(o,p):(m.d(1),m=P(o),m&&(m.c(),m.m(e,null))),p&1&&s!==(s=o[0].total+"")&&F(r,s),p&5){j=o[0].entries.filter(qe);let d;for(d=0;d<j.length;d+=1){const $=je(o,j,d);v[d]?v[d].p($,p):(v[d]=Le($),v[d].c(),v[d].m(E.parentNode,E))}for(;d<v.length;d+=1)v[d].d(1);v.length=j.length}if(p&5){T=o[0].entries.filter(Ve);let d;for(d=0;d<T.length;d+=1){const $=Re(o,T,d);D[d]?D[d].p($,p):(D[d]=Me($),D[d].c(),D[d].m(k.parentNode,k))}for(;d<D.length;d+=1)D[d].d(1);D.length=T.length}},d(o){o&&b(e),m.d(),o&&b(t),o&&b(l),o&&b(i),o&&b(r),o&&b(u),o&&b(a),o&&b(f),o&&b(A),o&&b(g),Ae(v,o),o&&b(E),o&&b(I),o&&b(h),Ae(D,o),o&&b(k)}}}function At(n){let e,t,l,i,s=n[11]>0&&Ot(n);return{c(){e=_("button"),e.textContent="\u{1F504}",s&&s.c(),t=Ge()},m(r,u){w(r,e,u),s&&s.m(r,u),w(r,t,u),l||(i=L(e,"click",n[4]),l=!0)},p(r,u){r[11]>0&&s.p(r,u)},d(r){r&&b(e),s&&s.d(r),r&&b(t),l=!1,i()}}}function Dt(n){let e,t,l;return{c(){e=_("button"),e.textContent="Connect"},m(i,s){w(i,e,s),t||(l=L(e,"click",n[3]),t=!0)},p:M,d(i){i&&b(e),t=!1,l()}}}function Ot(n){let e,t,l=n[11]+"",i,s;return{c(){e=_("em"),t=C("(last sync "),i=C(l),s=C(" days ago)")},m(r,u){w(r,e,u),c(e,t),c(e,i),c(e,s)},p:M,d(r){r&&b(e)}}}function Le(n){let e,t,l,i,s,r=n[12].title+"",u,a,f,A,g=n[12].feed.title+"",E,I,h,k=new Date(n[12].changed_at).toLocaleDateString()+"",R,P,m,j,v,T,D;function o(...d){return n[5](n[12],...d)}function p(...d){return n[6](n[12],...d)}return{c(){e=_("div"),t=_("button"),t.textContent="x",l=N(),i=_("span"),s=_("h3"),u=C(r),a=N(),f=_("em"),A=C("From "),E=C(g),I=C(" on "),h=_("date"),R=C(k),P=N(),m=_("a"),j=C(">"),O(t,"class","close svelte-nteh7u"),V(i,"flex-grow","4"),O(m,"href",v="article/"+n[12].id),O(m,"class","read svelte-nteh7u"),V(e,"display","flex"),V(e,"flex-direction","row"),O(e,"class","svelte-nteh7u")},m(d,$){w(d,e,$),c(e,t),c(e,l),c(e,i),c(i,s),c(s,u),c(i,a),c(i,f),c(f,A),c(f,E),c(f,I),c(f,h),c(h,R),c(e,P),c(e,m),c(m,j),T||(D=[L(t,"click",o),L(m,"click",ce(p))],T=!0)},p(d,$){n=d,$&1&&r!==(r=n[12].title+"")&&F(u,r),$&1&&g!==(g=n[12].feed.title+"")&&F(E,g),$&1&&k!==(k=new Date(n[12].changed_at).toLocaleDateString()+"")&&F(R,k),$&1&&v!==(v="article/"+n[12].id)&&O(m,"href",v)},d(d){d&&b(e),T=!1,z(D)}}}function Me(n){let e,t,l,i,s,r=n[12].title+"",u,a,f,A,g=n[12].feed.title+"",E,I,h,k=new Date(n[12].changed_at).toLocaleDateString()+"",R,P,m,j,v,T,D,o;function p(...$){return n[7](n[12],...$)}function d(...$){return n[8](n[12],...$)}return{c(){e=_("div"),t=_("button"),t.textContent="x",l=N(),i=_("span"),s=_("h3"),u=C(r),a=N(),f=_("em"),A=C("From "),E=C(g),I=C(" on "),h=_("date"),R=C(k),P=N(),m=_("a"),j=C(">"),T=N(),O(t,"class","close svelte-nteh7u"),V(i,"flex-grow","4"),O(m,"href",v="article/"+n[12].id),O(m,"class","read svelte-nteh7u"),V(e,"display","flex"),V(e,"flex-direction","row"),O(e,"class","svelte-nteh7u")},m($,S){w($,e,S),c(e,t),c(e,l),c(e,i),c(i,s),c(s,u),c(i,a),c(i,f),c(f,A),c(f,E),c(f,I),c(f,h),c(h,R),c(e,P),c(e,m),c(m,j),c(e,T),D||(o=[L(t,"click",p),L(m,"click",ce(d))],D=!0)},p($,S){n=$,S&1&&r!==(r=n[12].title+"")&&F(u,r),S&1&&g!==(g=n[12].feed.title+"")&&F(E,g),S&1&&k!==(k=new Date(n[12].changed_at).toLocaleDateString()+"")&&F(R,k),S&1&&v!==(v="article/"+n[12].id)&&O(m,"href",v)},d($){$&&b(e),D=!1,z(o)}}}function Ct(n){let e,t=n[0]&&Pe(ve(n));return{c(){e=_("main"),t&&t.c()},m(l,i){w(l,e,i),t&&t.m(e,null)},p(l,[i]){l[0]?t?t.p(ve(l),i):(t=Pe(ve(l)),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},i:M,o:M,d(l){l&&b(e),t&&t.d()}}}const qe=n=>n.status=="unread",Ve=n=>n.status=="read";function It(n,e,t){let l,i,s;Z(n,ne,h=>t(1,l=h)),Z(n,B,h=>t(9,i=h)),Z(n,X,h=>t(10,s=h));let r=null;async function u(h){let k=We();l==be&&(k<0||h)?(Se(X,s="Articles",s),Se(B,i="Connect",i)):l==fe&&(h||k<0)?(console.log(`Refreshing data because force_refresh(${h}) or age(${k}) < 0`),t(0,r=await ae.get_entries()),await gt(),await vt(r)):t(0,r=await mt())}return ke(()=>u(!1)),[r,l,u,h=>dt("Connect","Articles"),h=>u(!0),(h,k)=>{W(h.id,"REMOVED"),u()},(h,k)=>J("Article",{id:h.id}),(h,k)=>{W(h.id,"REMOVED"),u()},(h,k)=>J("Article",{id:h.id})]}class Nt extends pe{constructor(e){super(),he(this,e,It,Ct,se,{})}}function Fe(n){let e,t,l,i,s,r,u,a=n[1].title+"",f,A,g=n[1].status+"",E,I,h,k,R=n[1].content+"",P,m,j,v,T,D,o,p,d,$=n[1].status=="unread"&&ze(n);return{c(){e=_("nav"),t=_("button"),t.textContent="\u{1F519} Articles",l=N(),$&&$.c(),i=N(),s=_("button"),s.textContent="\u{1F44B} Delete",r=N(),u=_("h3"),f=C(a),A=C(" ("),E=C(g),I=C(")"),h=N(),k=new it(!1),P=N(),m=_("br"),j=N(),v=_("nav"),T=_("button"),T.textContent="\u{1F519} Articles",D=N(),o=_("button"),o.textContent="\u{1F44B} Delete",O(e,"id","nav-top"),V(e,"display","flex"),V(e,"justify-content","space-between"),k.a=P,O(v,"id","nav-bottom"),V(v,"display","flex"),V(v,"justify-content","space-between")},m(S,q){w(S,e,q),c(e,t),c(e,l),$&&$.m(e,null),c(e,i),c(e,s),w(S,r,q),w(S,u,q),c(u,f),c(u,A),c(u,E),c(u,I),w(S,h,q),k.m(R,S,q),w(S,P,q),w(S,m,q),w(S,j,q),w(S,v,q),c(v,T),c(v,D),c(v,o),p||(d=[L(t,"click",n[2]),L(s,"click",n[4]),L(T,"click",n[5]),L(o,"click",n[6])],p=!0)},p(S,q){S[1].status=="unread"?$?$.p(S,q):($=ze(S),$.c(),$.m(e,i)):$&&($.d(1),$=null),q&2&&a!==(a=S[1].title+"")&&F(f,a),q&2&&g!==(g=S[1].status+"")&&F(E,g),q&2&&R!==(R=S[1].content+"")&&k.p(R)},d(S){S&&b(e),$&&$.d(),S&&b(r),S&&b(u),S&&b(h),S&&k.d(),S&&b(P),S&&b(m),S&&b(j),S&&b(v),p=!1,z(d)}}}function ze(n){let e,t,l;return{c(){e=_("button"),e.textContent="\u2714\uFE0F Mark read"},m(i,s){w(i,e,s),t||(l=L(e,"click",n[3]),t=!0)},p:M,d(i){i&&b(e),t=!1,l()}}}function Tt(n){let e,t=n[1]&&Fe(n);return{c(){e=_("main"),t&&t.c()},m(l,i){w(l,e,i),t&&t.m(e,null)},p(l,[i]){l[1]?t?t.p(l,i):(t=Fe(l),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},i:M,o:M,d(l){l&&b(e),t&&t.d()}}}function Rt(n,e,t){let{id:l}=e,i,s=!0;async function r(){t(1,i=await Je(l))}let u=new IntersectionObserver(()=>{s?s=!1:W(l,"READ")},{root:document.querySelector("#scrollArea"),rootMargin:"0px",threshold:1}),a=!1;ke(r),st(()=>{let h=document.querySelector("#nav-bottom");h&&!a&&(u.observe(h),a=!0),console.log("After update called"),s=!0});const f=()=>J("Articles"),A=()=>W(l,"READ"),g=()=>{W(l,"REMOVED"),J("Articles")},E=()=>J("Articles"),I=()=>{W(l,"REMOVED"),J("Articles")};return n.$$set=h=>{"id"in h&&t(0,l=h.id)},[l,i,f,A,g,E,I]}class jt extends pe{constructor(e){super(),he(this,e,Rt,Tt,se,{id:0})}}function Pt(n){let e,t;return e=new Nt({}),{c(){ye(e.$$.fragment)},m(l,i){de(e,l,i),t=!0},p:M,i(l){t||(Q(e.$$.fragment,l),t=!0)},o(l){ie(e.$$.fragment,l),t=!1},d(l){_e(e,l)}}}function Lt(n){let e,t;return e=new jt({props:{id:n[1].id}}),{c(){ye(e.$$.fragment)},m(l,i){de(e,l,i),t=!0},p(l,i){const s={};i&2&&(s.id=l[1].id),e.$set(s)},i(l){t||(Q(e.$$.fragment,l),t=!0)},o(l){ie(e.$$.fragment,l),t=!1},d(l){_e(e,l)}}}function Mt(n){let e,t;return e=new St({}),{c(){ye(e.$$.fragment)},m(l,i){de(e,l,i),t=!0},p:M,i(l){t||(Q(e.$$.fragment,l),t=!0)},o(l){ie(e.$$.fragment,l),t=!1},d(l){_e(e,l)}}}function qt(n){let e,t,l,i;const s=[Mt,Lt,Pt],r=[];function u(a,f){return a[0]=="Connect"?0:a[0]=="Article"?1:a[0]=="Articles"||a[0]==""?2:-1}return~(t=u(n))&&(l=r[t]=s[t](n)),{c(){e=_("main"),l&&l.c()},m(a,f){w(a,e,f),~t&&r[t].m(e,null),i=!0},p(a,[f]){let A=t;t=u(a),t===A?~t&&r[t].p(a,f):(l&&(ct(),ie(r[A],1,1,()=>{r[A]=null}),ft()),~t?(l=r[t],l?l.p(a,f):(l=r[t]=s[t](a),l.c()),Q(l,1),l.m(e,null)):l=null)},i(a){i||(Q(l),i=!0)},o(a){ie(l),i=!1},d(a){a&&b(e),~t&&r[t].d()}}}function Vt(n,e,t){let l,i;return Z(n,B,s=>t(0,l=s)),Z(n,Ke,s=>t(1,i=s)),[l,i]}class Ft extends pe{constructor(e){super(),he(this,e,Vt,qt,se,{})}}new Ft({target:document.getElementById("app")});
